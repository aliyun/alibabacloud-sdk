/**
 *
 */
import Util;
import OpenApi;
import OpenApiUtil;
import EndpointUtil;

extends OpenApi;


init(config: OpenApi.Config){
  super(config);
  @endpointRule = 'regional';
  
  checkConfig(config);
  @endpoint = getEndpoint('cams', @regionId, @endpointRule, @network, @suffix, @endpointMap, @endpoint);
}

function getEndpoint(productId: string, regionId: string, endpointRule: string, network: string, suffix: string, endpointMap: map[string]string, endpoint: string) throws: string{
  if (!Util.empty(endpoint)) {
    return endpoint;
  }
  
  if (!Util.isUnset(endpointMap) && !Util.empty(endpointMap[regionId])) {
    return endpointMap[regionId];
  }
  return EndpointUtil.getEndpointRules(productId, regionId, endpointRule, network, suffix);
}

model CheckChatappContactsRequest {
  channelType?: string(name='ChannelType', description='通道类型'),
  contacts?: [ string ](name='Contacts', description='需要查询的用户列表,单次调用最多查询10个。注意：用户号码必须加国家码'),
  custWabaId?: string(name='CustWabaId', description='ISV客户wabaId'),
  from?: string(name='From', description='发送号码,所选择ChannelType下的Business账号，即在控制台上审核通过的Number'),
}

model CheckChatappContactsShrinkRequest {
  channelType?: string(name='ChannelType', description='通道类型'),
  contactsShrink?: string(name='Contacts', description='需要查询的用户列表,单次调用最多查询10个。注意：用户号码必须加国家码'),
  custWabaId?: string(name='CustWabaId', description='ISV客户wabaId'),
  from?: string(name='From', description='发送号码,所选择ChannelType下的Business账号，即在控制台上审核通过的Number'),
}

model CheckChatappContactsResponseBody = {
  code?: string(name='Code', description='返回结果 OK 为正常'),
  data?: [ 
    {
      phoneNumber?: string(name='PhoneNumber', description='号码'),
      status?: string(name='Status', description='状态
有效账号为"valid"，无法账号为"invalid"，查询失败返回"failed"'),
    }
  ](name='Data'),
  message?: string(name='Message', description='提示信息，当返回异常时有值'),
  requestId?: string(name='RequestId', description='请求ID'),
}

model CheckChatappContactsResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: CheckChatappContactsResponseBody(name='body'),
}

async function checkChatappContactsWithOptions(tmpReq: CheckChatappContactsRequest, runtime: Util.RuntimeOptions): CheckChatappContactsResponse {
  Util.validateModel(tmpReq);
  var request = new CheckChatappContactsShrinkRequest{};
  OpenApiUtil.convert(tmpReq, request);
  if (!Util.isUnset(tmpReq.contacts)) {
    request.contactsShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.contacts, 'Contacts', 'json');
  }
  var body : map[string]any= {};
  if (!Util.isUnset(request.channelType)) {
    body['ChannelType'] = request.channelType;
  }
  if (!Util.isUnset(request.contactsShrink)) {
    body['Contacts'] = request.contactsShrink;
  }
  if (!Util.isUnset(request.custWabaId)) {
    body['CustWabaId'] = request.custWabaId;
  }
  if (!Util.isUnset(request.from)) {
    body['From'] = request.from;
  }
  var req = new OpenApi.OpenApiRequest{ 
    body = OpenApiUtil.parseToMap(body),
  };
  var params = new OpenApi.Params{
    action = 'CheckChatappContacts',
    version = '2020-06-06',
    protocol = 'HTTPS',
    pathname = '/',
    method = 'POST',
    authType = 'AK',
    style = 'RPC',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

async function checkChatappContacts(request: CheckChatappContactsRequest): CheckChatappContactsResponse {
  var runtime = new Util.RuntimeOptions{};
  return checkChatappContactsWithOptions(request, runtime);
}

model CreateChatappTemplateRequest {
  category?: string(name='Category', description='模板分类'),
  components?: [ 
    {
      buttons?: [ 
        {
          phoneNumber?: string(name='PhoneNumber', description='号码'),
          text?: string(name='Text', description='所发送消息的文本'),
          type?: string(name='Type', description='按钮类型
PHONE_NUMBER（电话）,URL（网页按钮）和QUICK_REPLY（快速回复）'),
          url?: string(name='Url', description='点击按钮后将访问的网址'),
          urlType?: string(name='UrlType', description='网址类型 static-静态dynamic-动态'),
        }
      ](name='Buttons', description='按钮'),
      caption?: string(name='Caption', description='描述，当Type为Header，且Format为IMGAGE/DOCUMENT/VIDEO 可以增加描述'),
      fileName?: string(name='FileName', description='文件名称，当Type为Header，且Format为DOCUMENT时可以给文件指定名称'),
      format?: string(name='Format', description='格式
TEXT-文本 IMGAGE-图片 DOCUMENT-文档 VIDEO-视频'),
      text?: string(name='Text', description='所发送消息的文本'),
      type?: string(name='Type', description='组件类型
值：BODY、HEADER、FOOTER 和 BUTTONS'),
      url?: string(name='Url', description='素材路径'),
    }
  ](name='Components'),
  custWabaId?: string(name='CustWabaId', description='ISV客户WabaId'),
  example?: map[string]string(name='Example', description='变量，KEY-VALUE结构'),
  language?: string(name='Language', description='语言'),
  name?: string(name='Name', description='模板名称'),
  templateType?: string(name='TemplateType', description='模板类型'),
}

model CreateChatappTemplateShrinkRequest {
  category?: string(name='Category', description='模板分类'),
  componentsShrink?: string(name='Components'),
  custWabaId?: string(name='CustWabaId', description='ISV客户WabaId'),
  exampleShrink?: string(name='Example', description='变量，KEY-VALUE结构'),
  language?: string(name='Language', description='语言'),
  name?: string(name='Name', description='模板名称'),
  templateType?: string(name='TemplateType', description='模板类型'),
}

model CreateChatappTemplateResponseBody = {
  code?: string(name='Code', description='返回结果 OK 为正常'),
  data?: {
    templateCode?: string(name='TemplateCode', description='模板Code'),
    templateName?: string(name='TemplateName', description='模板名称'),
  }(name='Data'),
  message?: string(name='Message', description='提示信息，当返回异常时有值'),
  requestId?: string(name='RequestId', description='请求ID'),
}

model CreateChatappTemplateResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: CreateChatappTemplateResponseBody(name='body'),
}

async function createChatappTemplateWithOptions(tmpReq: CreateChatappTemplateRequest, runtime: Util.RuntimeOptions): CreateChatappTemplateResponse {
  Util.validateModel(tmpReq);
  var request = new CreateChatappTemplateShrinkRequest{};
  OpenApiUtil.convert(tmpReq, request);
  if (!Util.isUnset(tmpReq.components)) {
    request.componentsShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.components, 'Components', 'json');
  }
  if (!Util.isUnset(tmpReq.example)) {
    request.exampleShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.example, 'Example', 'json');
  }
  var body : map[string]any= {};
  if (!Util.isUnset(request.category)) {
    body['Category'] = request.category;
  }
  if (!Util.isUnset(request.componentsShrink)) {
    body['Components'] = request.componentsShrink;
  }
  if (!Util.isUnset(request.custWabaId)) {
    body['CustWabaId'] = request.custWabaId;
  }
  if (!Util.isUnset(request.exampleShrink)) {
    body['Example'] = request.exampleShrink;
  }
  if (!Util.isUnset(request.language)) {
    body['Language'] = request.language;
  }
  if (!Util.isUnset(request.name)) {
    body['Name'] = request.name;
  }
  if (!Util.isUnset(request.templateType)) {
    body['TemplateType'] = request.templateType;
  }
  var req = new OpenApi.OpenApiRequest{ 
    body = OpenApiUtil.parseToMap(body),
  };
  var params = new OpenApi.Params{
    action = 'CreateChatappTemplate',
    version = '2020-06-06',
    protocol = 'HTTPS',
    pathname = '/',
    method = 'POST',
    authType = 'AK',
    style = 'RPC',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

async function createChatappTemplate(request: CreateChatappTemplateRequest): CreateChatappTemplateResponse {
  var runtime = new Util.RuntimeOptions{};
  return createChatappTemplateWithOptions(request, runtime);
}

model DeleteChatappTemplateRequest {
  custWabaId?: string(name='CustWabaId', description='ISV客户wabaId'),
  templateCode?: string(name='TemplateCode', description='模板编码'),
}

model DeleteChatappTemplateResponseBody = {
  code?: string(name='Code', description='返回结果 OK 为正常'),
  message?: string(name='Message', description='提示信息，当返回异常时有值'),
  requestId?: string(name='RequestId', description='请求ID'),
}

model DeleteChatappTemplateResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: DeleteChatappTemplateResponseBody(name='body'),
}

async function deleteChatappTemplateWithOptions(request: DeleteChatappTemplateRequest, runtime: Util.RuntimeOptions): DeleteChatappTemplateResponse {
  Util.validateModel(request);
  var query = {};
  if (!Util.isUnset(request.custWabaId)) {
    query['CustWabaId'] = request.custWabaId;
  }
  if (!Util.isUnset(request.templateCode)) {
    query['TemplateCode'] = request.templateCode;
  }
  var req = new OpenApi.OpenApiRequest{ 
    query = OpenApiUtil.query(query),
  };
  var params = new OpenApi.Params{
    action = 'DeleteChatappTemplate',
    version = '2020-06-06',
    protocol = 'HTTPS',
    pathname = '/',
    method = 'POST',
    authType = 'AK',
    style = 'RPC',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

async function deleteChatappTemplate(request: DeleteChatappTemplateRequest): DeleteChatappTemplateResponse {
  var runtime = new Util.RuntimeOptions{};
  return deleteChatappTemplateWithOptions(request, runtime);
}

model GetChatappTemplateDetailRequest {
  custWabaId?: string(name='CustWabaId', description='ISV客户WabaId'),
  language?: string(name='Language', description='语言'),
  templateCode?: string(name='TemplateCode', description='模板分类'),
}

model GetChatappTemplateDetailResponseBody = {
  code?: string(name='Code', description='返回结果 OK 为正常'),
  data?: {
    auditStatus?: string(name='AuditStatus', description='审核状态'),
    category?: string(name='Category', description='模板分类'),
    components?: [ 
      {
        buttons?: [ 
          {
            phoneNumber?: string(name='PhoneNumber', description='电话号码'),
            text?: string(name='Text', description='所发送消息的文本'),
            type?: string(name='Type', description='按钮类型'),
            url?: string(name='Url', description='当按钮类型是
URL 时有效'),
            urlType?: string(name='UrlType', description='WEB地址类型
static-静态
dynamic-动态'),
          }
        ](name='Buttons', description='仅适用于 BUTTONS 类型。
与按钮相关的参数。'),
        caption?: string(name='Caption', description='描述，当Type为Header，且Format为IMGAGE/DOCUMENT/VIDEO 可以增加描述'),
        fileName?: string(name='FileName', description='文件名称，当Type为Header，且Format为DOCUMENT时可以给文件指定名称'),
        format?: string(name='Format', description='格式'),
        text?: string(name='Text', description='所发送消息的文本'),
        type?: string(name='Type', description='组件类型'),
        url?: string(name='Url', description='素材路径'),
      }
    ](name='Components', description='消息模板组件'),
    example?: map[string]string(name='Example', description='变量例子'),
    language?: string(name='Language', description='语言'),
    name?: string(name='Name', description='模板名称'),
    templateCode?: string(name='TemplateCode', description='模板编码'),
  }(name='Data', description='TemplateDetail'),
  message?: string(name='Message'),
  requestId?: string(name='RequestId', description='请求ID'),
}

model GetChatappTemplateDetailResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: GetChatappTemplateDetailResponseBody(name='body'),
}

async function getChatappTemplateDetailWithOptions(request: GetChatappTemplateDetailRequest, runtime: Util.RuntimeOptions): GetChatappTemplateDetailResponse {
  Util.validateModel(request);
  var query = {};
  if (!Util.isUnset(request.custWabaId)) {
    query['CustWabaId'] = request.custWabaId;
  }
  if (!Util.isUnset(request.language)) {
    query['Language'] = request.language;
  }
  if (!Util.isUnset(request.templateCode)) {
    query['TemplateCode'] = request.templateCode;
  }
  var req = new OpenApi.OpenApiRequest{ 
    query = OpenApiUtil.query(query),
  };
  var params = new OpenApi.Params{
    action = 'GetChatappTemplateDetail',
    version = '2020-06-06',
    protocol = 'HTTPS',
    pathname = '/',
    method = 'POST',
    authType = 'AK',
    style = 'RPC',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

async function getChatappTemplateDetail(request: GetChatappTemplateDetailRequest): GetChatappTemplateDetailResponse {
  var runtime = new Util.RuntimeOptions{};
  return getChatappTemplateDetailWithOptions(request, runtime);
}

model ListChatappTemplateRequest {
  auditStatus?: string(name='AuditStatus', description='审核状态'),
  custWabaId?: string(name='CustWabaId', description='ISV客户WabaId'),
  language?: string(name='Language', description='语言'),
  name?: string(name='Name', description='模板名称'),
  page?: {
    index?: int32(name='Index', description='查询开始数'),
    size?: int32(name='Size', description='每次查询返回的条数'),
  }(name='Page'),
}

model ListChatappTemplateShrinkRequest {
  auditStatus?: string(name='AuditStatus', description='审核状态'),
  custWabaId?: string(name='CustWabaId', description='ISV客户WabaId'),
  language?: string(name='Language', description='语言'),
  name?: string(name='Name', description='模板名称'),
  pageShrink?: string(name='Page'),
}

model ListChatappTemplateResponseBody = {
  code?: string(name='Code'),
  listTemplate?: [ 
    {
      auditStatus?: string(name='AuditStatus', description='审核状态'),
      category?: string(name='Category', description='模板分类'),
      language?: string(name='Language', description='语言'),
      templateCode?: string(name='TemplateCode', description='模板编码'),
      templateName?: string(name='TemplateName', description='模板名称'),
    }
  ](name='ListTemplate', description='模板列表'),
  message?: string(name='Message'),
  requestId?: string(name='RequestId'),
}

model ListChatappTemplateResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: ListChatappTemplateResponseBody(name='body'),
}

async function listChatappTemplateWithOptions(tmpReq: ListChatappTemplateRequest, runtime: Util.RuntimeOptions): ListChatappTemplateResponse {
  Util.validateModel(tmpReq);
  var request = new ListChatappTemplateShrinkRequest{};
  OpenApiUtil.convert(tmpReq, request);
  if (!Util.isUnset(tmpReq.page)) {
    request.pageShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.page, 'Page', 'json');
  }
  var query = {};
  if (!Util.isUnset(request.auditStatus)) {
    query['AuditStatus'] = request.auditStatus;
  }
  if (!Util.isUnset(request.custWabaId)) {
    query['CustWabaId'] = request.custWabaId;
  }
  if (!Util.isUnset(request.language)) {
    query['Language'] = request.language;
  }
  if (!Util.isUnset(request.name)) {
    query['Name'] = request.name;
  }
  if (!Util.isUnset(request.pageShrink)) {
    query['Page'] = request.pageShrink;
  }
  var req = new OpenApi.OpenApiRequest{ 
    query = OpenApiUtil.query(query),
  };
  var params = new OpenApi.Params{
    action = 'ListChatappTemplate',
    version = '2020-06-06',
    protocol = 'HTTPS',
    pathname = '/',
    method = 'POST',
    authType = 'AK',
    style = 'RPC',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

async function listChatappTemplate(request: ListChatappTemplateRequest): ListChatappTemplateResponse {
  var runtime = new Util.RuntimeOptions{};
  return listChatappTemplateWithOptions(request, runtime);
}

model SendChatappMessageRequest {
  channelType?: string(name='ChannelType', description='通道类型 whatsapp/viber/line'),
  content?: string(name='Content', description='消息内容'),
  custWabaId?: string(name='CustWabaId', description='ISV客户wabaId'),
  fallBackContent?: string(name='FallBackContent', description='回落消息内容'),
  fallBackId?: string(name='FallBackId', description='回落策略ID，可在控制台创建策略并查看'),
  from?: string(name='From', description='发送方'),
  language?: string(name='Language', description='语言'),
  messageType?: string(name='MessageType', description='消息类型'),
  payload?: [ string ](name='Payload'),
  templateCode?: string(name='TemplateCode', description='模板编码'),
  templateParams?: map[string]string(name='TemplateParams'),
  to?: string(name='To', description='接收号码'),
  type?: string(name='Type', description='消息大类
template--模板
message--非模板'),
}

model SendChatappMessageShrinkRequest {
  channelType?: string(name='ChannelType', description='通道类型 whatsapp/viber/line'),
  content?: string(name='Content', description='消息内容'),
  custWabaId?: string(name='CustWabaId', description='ISV客户wabaId'),
  fallBackContent?: string(name='FallBackContent', description='回落消息内容'),
  fallBackId?: string(name='FallBackId', description='回落策略ID，可在控制台创建策略并查看'),
  from?: string(name='From', description='发送方'),
  language?: string(name='Language', description='语言'),
  messageType?: string(name='MessageType', description='消息类型'),
  payloadShrink?: string(name='Payload'),
  templateCode?: string(name='TemplateCode', description='模板编码'),
  templateParamsShrink?: string(name='TemplateParams'),
  to?: string(name='To', description='接收号码'),
  type?: string(name='Type', description='消息大类
template--模板
message--非模板'),
}

model SendChatappMessageResponseBody = {
  code?: string(name='Code'),
  message?: string(name='Message'),
  messageId?: string(name='MessageId', description='消息ID'),
  requestId?: string(name='RequestId'),
}

model SendChatappMessageResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: SendChatappMessageResponseBody(name='body'),
}

async function sendChatappMessageWithOptions(tmpReq: SendChatappMessageRequest, runtime: Util.RuntimeOptions): SendChatappMessageResponse {
  Util.validateModel(tmpReq);
  var request = new SendChatappMessageShrinkRequest{};
  OpenApiUtil.convert(tmpReq, request);
  if (!Util.isUnset(tmpReq.payload)) {
    request.payloadShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.payload, 'Payload', 'json');
  }
  if (!Util.isUnset(tmpReq.templateParams)) {
    request.templateParamsShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.templateParams, 'TemplateParams', 'json');
  }
  var query = {};
  if (!Util.isUnset(request.content)) {
    query['Content'] = request.content;
  }
  if (!Util.isUnset(request.payloadShrink)) {
    query['Payload'] = request.payloadShrink;
  }
  var body : map[string]any= {};
  if (!Util.isUnset(request.channelType)) {
    body['ChannelType'] = request.channelType;
  }
  if (!Util.isUnset(request.custWabaId)) {
    body['CustWabaId'] = request.custWabaId;
  }
  if (!Util.isUnset(request.fallBackContent)) {
    body['FallBackContent'] = request.fallBackContent;
  }
  if (!Util.isUnset(request.fallBackId)) {
    body['FallBackId'] = request.fallBackId;
  }
  if (!Util.isUnset(request.from)) {
    body['From'] = request.from;
  }
  if (!Util.isUnset(request.language)) {
    body['Language'] = request.language;
  }
  if (!Util.isUnset(request.messageType)) {
    body['MessageType'] = request.messageType;
  }
  if (!Util.isUnset(request.templateCode)) {
    body['TemplateCode'] = request.templateCode;
  }
  if (!Util.isUnset(request.templateParamsShrink)) {
    body['TemplateParams'] = request.templateParamsShrink;
  }
  if (!Util.isUnset(request.to)) {
    body['To'] = request.to;
  }
  if (!Util.isUnset(request.type)) {
    body['Type'] = request.type;
  }
  var req = new OpenApi.OpenApiRequest{ 
    query = OpenApiUtil.query(query),
    body = OpenApiUtil.parseToMap(body),
  };
  var params = new OpenApi.Params{
    action = 'SendChatappMessage',
    version = '2020-06-06',
    protocol = 'HTTPS',
    pathname = '/',
    method = 'POST',
    authType = 'AK',
    style = 'RPC',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

async function sendChatappMessage(request: SendChatappMessageRequest): SendChatappMessageResponse {
  var runtime = new Util.RuntimeOptions{};
  return sendChatappMessageWithOptions(request, runtime);
}

