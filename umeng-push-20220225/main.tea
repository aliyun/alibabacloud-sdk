/**
 *
 */
import Util;
import OpenApi;
import OpenApiUtil;
import EndpointUtil;

extends OpenApi;


init(config: OpenApi.Config){
  super(config);
  @endpointRule = '';
  
  checkConfig(config);
  @endpoint = getEndpoint('umeng-push', @regionId, @endpointRule, @network, @suffix, @endpointMap, @endpoint);
}

function getEndpoint(productId: string, regionId: string, endpointRule: string, network: string, suffix: string, endpointMap: map[string]string, endpoint: string) throws: string{
  if (!Util.empty(endpoint)) {
    return endpoint;
  }
  
  if (!Util.isUnset(endpointMap) && !Util.empty(endpointMap[regionId])) {
    return endpointMap[regionId];
  }
  return EndpointUtil.getEndpointRules(productId, regionId, endpointRule, network, suffix);
}

model Alert {
  body?: string(name='body'),
  subtitle?: string(name='subtitle'),
  title?: string(name='title'),
}

model AndroidPayload {
  body?: Body(name='body'),
  displayType?: string(name='displayType'),
  extra?: map[string]any(name='extra'),
}

model Aps {
  alert?: Alert(name='alert'),
  badge?: int32(name='badge'),
  category?: string(name='category'),
  contentAvailable?: int32(name='contentAvailable'),
  interruptionLevel?: string(name='interruptionLevel'),
  sound?: string(name='sound'),
}

model Body {
  activity?: string(name='activity'),
  afterOpen?: string(name='afterOpen'),
  badge?: int32(name='badge'),
  builderId?: long(name='builderId'),
  custom?: string(name='custom'),
  expandImage?: string(name='expandImage'),
  icon?: string(name='icon'),
  img?: string(name='img'),
  largeIcon?: string(name='largeIcon'),
  playLights?: boolean(name='playLights'),
  playSound?: boolean(name='playSound'),
  playVibrate?: boolean(name='playVibrate'),
  sound?: string(name='sound'),
  text?: string(name='text'),
  title?: string(name='title'),
  url?: string(name='url'),
}

model ChannelProperties {
  channelActivity?: string(name='channelActivity'),
  mainActivity?: string(name='mainActivity'),
  oppoChannelId?: string(name='oppoChannelId'),
  vivoClassification?: string(name='vivoClassification'),
  xiaomiChannelId?: string(name='xiaomiChannelId'),
}

model IosPayload {
  aps?: Aps(name='aps'),
  extra?: map[string]any(name='extra'),
}

model Policy {
  expireTime?: string(name='expireTime'),
  outerBizNo?: string(name='outerBizNo'),
  speed?: int32(name='speed'),
  startTime?: string(name='startTime'),
}

model SendByAppRequest {
  androidPayload?: AndroidPayload(name='AndroidPayload'),
  channelProperties?: ChannelProperties(name='ChannelProperties'),
  description?: string(name='Description'),
  iosPayload?: IosPayload(name='IosPayload'),
  policy?: Policy(name='Policy'),
  productionMode?: boolean(name='ProductionMode'),
  receiptType?: int32(name='ReceiptType'),
  receiptUrl?: string(name='ReceiptUrl'),
}

model SendByAppShrinkRequest {
  androidPayloadShrink?: string(name='AndroidPayload'),
  channelPropertiesShrink?: string(name='ChannelProperties'),
  description?: string(name='Description'),
  iosPayloadShrink?: string(name='IosPayload'),
  policyShrink?: string(name='Policy'),
  productionMode?: boolean(name='ProductionMode'),
  receiptType?: int32(name='ReceiptType'),
  receiptUrl?: string(name='ReceiptUrl'),
}

model SendByAppResponseBody = {
  code?: string(name='Code'),
  data?: {
    msgId?: string(name='MsgId'),
  }(name='Data'),
  httpStatusCode?: int32(name='HttpStatusCode'),
  message?: string(name='Message'),
  requestId?: string(name='RequestId'),
  success?: boolean(name='Success'),
}

model SendByAppResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: SendByAppResponseBody(name='body'),
}

async function sendByApp(request: SendByAppRequest): SendByAppResponse {
  var runtime = new Util.RuntimeOptions{};
  var headers : map[string]string = {};
  return sendByAppWithOptions(request, headers, runtime);
}

async function sendByAppWithOptions(tmpReq: SendByAppRequest, headers: map[string]string, runtime: Util.RuntimeOptions): SendByAppResponse {
  Util.validateModel(tmpReq);
  var request = new SendByAppShrinkRequest{};
  OpenApiUtil.convert(tmpReq, request);
  if (!Util.isUnset(tmpReq.androidPayload)) {
    request.androidPayloadShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.androidPayload, 'AndroidPayload', 'json');
  }
  if (!Util.isUnset(tmpReq.channelProperties)) {
    request.channelPropertiesShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.channelProperties, 'ChannelProperties', 'json');
  }
  if (!Util.isUnset(tmpReq.iosPayload)) {
    request.iosPayloadShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.iosPayload, 'IosPayload', 'json');
  }
  if (!Util.isUnset(tmpReq.policy)) {
    request.policyShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.policy, 'Policy', 'json');
  }
  var body : map[string]any = {};
  if (!Util.isUnset(request.androidPayloadShrink)) {
    body['AndroidPayload'] = request.androidPayloadShrink;
  }
  if (!Util.isUnset(request.channelPropertiesShrink)) {
    body['ChannelProperties'] = request.channelPropertiesShrink;
  }
  if (!Util.isUnset(request.description)) {
    body['Description'] = request.description;
  }
  if (!Util.isUnset(request.iosPayloadShrink)) {
    body['IosPayload'] = request.iosPayloadShrink;
  }
  if (!Util.isUnset(request.policyShrink)) {
    body['Policy'] = request.policyShrink;
  }
  if (!Util.isUnset(request.productionMode)) {
    body['ProductionMode'] = request.productionMode;
  }
  if (!Util.isUnset(request.receiptType)) {
    body['ReceiptType'] = request.receiptType;
  }
  if (!Util.isUnset(request.receiptUrl)) {
    body['ReceiptUrl'] = request.receiptUrl;
  }

  var req = new OpenApi.OpenApiRequest{ 
    headers = headers,
    body = OpenApiUtil.parseToMap(body),
  };
  var params = new OpenApi.Params{
    action = 'SendByApp',
    version = '2022-02-25',
    protocol = 'HTTPS',
    pathname = `/SendByApp`,
    method = 'POST',
    authType = 'AK',
    style = 'ROA',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

model SendByDeviceRequest {
  androidPayload?: AndroidPayload(name='AndroidPayload'),
  channelProperties?: ChannelProperties(name='ChannelProperties'),
  description?: string(name='Description'),
  deviceTokens?: string(name='DeviceTokens'),
  iosPayload?: IosPayload(name='IosPayload'),
  policy?: Policy(name='Policy'),
  productionMode?: boolean(name='ProductionMode'),
  receiptType?: int32(name='ReceiptType'),
  receiptUrl?: string(name='ReceiptUrl'),
}

model SendByDeviceShrinkRequest {
  androidPayloadShrink?: string(name='AndroidPayload'),
  channelPropertiesShrink?: string(name='ChannelProperties'),
  description?: string(name='Description'),
  deviceTokens?: string(name='DeviceTokens'),
  iosPayloadShrink?: string(name='IosPayload'),
  policyShrink?: string(name='Policy'),
  productionMode?: boolean(name='ProductionMode'),
  receiptType?: int32(name='ReceiptType'),
  receiptUrl?: string(name='ReceiptUrl'),
}

model SendByDeviceResponseBody = {
  code?: string(name='Code'),
  data?: {
    msgId?: string(name='MsgId'),
  }(name='Data'),
  httpStatusCode?: int32(name='HttpStatusCode'),
  message?: string(name='Message'),
  requestId?: string(name='RequestId'),
  success?: boolean(name='Success'),
}

model SendByDeviceResponse = {
  headers: map[string]string(name='headers'),
  statusCode: int32(name='statusCode'),
  body: SendByDeviceResponseBody(name='body'),
}

async function sendByDevice(request: SendByDeviceRequest): SendByDeviceResponse {
  var runtime = new Util.RuntimeOptions{};
  var headers : map[string]string = {};
  return sendByDeviceWithOptions(request, headers, runtime);
}

async function sendByDeviceWithOptions(tmpReq: SendByDeviceRequest, headers: map[string]string, runtime: Util.RuntimeOptions): SendByDeviceResponse {
  Util.validateModel(tmpReq);
  var request = new SendByDeviceShrinkRequest{};
  OpenApiUtil.convert(tmpReq, request);
  if (!Util.isUnset(tmpReq.androidPayload)) {
    request.androidPayloadShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.androidPayload, 'AndroidPayload', 'json');
  }
  if (!Util.isUnset(tmpReq.channelProperties)) {
    request.channelPropertiesShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.channelProperties, 'ChannelProperties', 'json');
  }
  if (!Util.isUnset(tmpReq.iosPayload)) {
    request.iosPayloadShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.iosPayload, 'IosPayload', 'json');
  }
  if (!Util.isUnset(tmpReq.policy)) {
    request.policyShrink = OpenApiUtil.arrayToStringWithSpecifiedStyle(tmpReq.policy, 'Policy', 'json');
  }
  var body : map[string]any = {};
  if (!Util.isUnset(request.androidPayloadShrink)) {
    body['AndroidPayload'] = request.androidPayloadShrink;
  }
  if (!Util.isUnset(request.channelPropertiesShrink)) {
    body['ChannelProperties'] = request.channelPropertiesShrink;
  }
  if (!Util.isUnset(request.description)) {
    body['Description'] = request.description;
  }
  if (!Util.isUnset(request.deviceTokens)) {
    body['DeviceTokens'] = request.deviceTokens;
  }
  if (!Util.isUnset(request.iosPayloadShrink)) {
    body['IosPayload'] = request.iosPayloadShrink;
  }
  if (!Util.isUnset(request.policyShrink)) {
    body['Policy'] = request.policyShrink;
  }
  if (!Util.isUnset(request.productionMode)) {
    body['ProductionMode'] = request.productionMode;
  }
  if (!Util.isUnset(request.receiptType)) {
    body['ReceiptType'] = request.receiptType;
  }
  if (!Util.isUnset(request.receiptUrl)) {
    body['ReceiptUrl'] = request.receiptUrl;
  }

  var req = new OpenApi.OpenApiRequest{ 
    headers = headers,
    body = OpenApiUtil.parseToMap(body),
  };
  var params = new OpenApi.Params{
    action = 'SendByDevice',
    version = '2022-02-25',
    protocol = 'HTTPS',
    pathname = `/SendByDevice`,
    method = 'POST',
    authType = 'AK',
    style = 'ROA',
    reqBodyType = 'formData',
    bodyType = 'json',
  };
  return callApi(params, req, runtime);
}

